<page-header></page-header>

<div class="container-md modality pb-5">
  <title-bar
    [title]="modality.name"
    [subtitle]="modality.event?.name"
    [back]="modality.event ? ['/event', modality.event.id] : undefined">
  </title-bar>

  <div *ngIf="modality.finished" class="collapse-holder mb-3">
    <a class="collapse-title" data-bs-toggle="collapse" href="#collapseStandings" role="button" aria-expanded="true" aria-controls="collapseStandings">
      {{ 'modalities.standings' | translate }}
    </a>
    <div class="collapse show standings" id="collapseStandings">
      List of Standings
    </div>
  </div>

  <div class="collapse-holder mb-3">
    <a class="btn btn-secondary rounded-0 d-block collapse-title" data-bs-toggle="collapse" href="#collapseMatches" role="button" aria-expanded="false" aria-controls="collapseMatches">
      {{ 'modalities.matches' | translate }}
    </a>
    <div class="collapse matches" id="collapseMatches">
      <ul *ngIf="!modality.finished" class="nav nav-tabs mt-2" id="matchesTabs" role="tablist">
        <li class="nav-item w-50 text-center" role="presentation">
          <button class="nav-link d-block w-100" id="prev-tab" data-bs-toggle="tab" data-bs-target="#prev" type="button" role="tab" aria-selected="false">Previous</button>
        </li>
        <li class="nav-item w-50 text-center" role="presentation">
          <button class="nav-link d-block w-100 active" id="next-tab" data-bs-toggle="tab" data-bs-target="#next" type="button" role="tab" aria-selected="true">Next</button>
        </li>
      </ul>
      <div class="tab-content" id="modalityTabsContent">
        <div class="tab-pane fade" [class.active]="modality.finished" [class.show]="modality.finished" id="prev" role="tabpanel" aria-labelledby="prev-tab">
          <div *ngFor="let match of finishedMatches" class="match-item mt-2">
            <match [match]="match"></match>
          </div>
        </div>
        <div *ngIf="!modality.finished" class="tab-pane fade active show" id="next" role="tabpanel" aria-labelledby="next-tab">
          <div *ngFor="let match of remainingMatches" class="match-item mt-2">
            <match [match]="match"></match>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="collapse-holder mb-3">
    <a class="btn btn-secondary rounded-0 d-block collapse-title" data-bs-toggle="collapse" href="#collapseStage1" role="button" aria-expanded="false" aria-controls="collapseStage1">
      Group Stage
    </a>
    <div class="collapse stage" id="collapseStage1">
      Stage 1 groups
    </div>
  </div>

  <div class="collapse-holder mb-3">
    <a class="btn btn-secondary rounded-0 d-block collapse-title" data-bs-toggle="collapse" href="#collapseStage2" role="button" aria-expanded="false" aria-controls="collapseStage2">
      Playoffs
    </a>
    <div class="collapse stage" id="collapseStage2">
      Stage 2 brackets
    </div>
  </div>

  <div class="collapse-holder mb-3">
    <a class="btn btn-secondary rounded-0 d-block collapse-title" data-bs-toggle="collapse" href="#collapseTeams" role="button" aria-expanded="false" aria-controls="collapseTeams">
      {{ 'modalities.teams' | translate }}
    </a>
    <div class="collapse teams" id="collapseTeams">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col"></th>
            <th scope="col">Group</th>
            <th scope="col">Name</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let team of teams" class="team">
            <td class="group-symbol">
              <div class="group-color-box">
                <span class="color-1" [style]="{ 'border-color': 'black' }"></span>
                <span class="color-2" [style]="{ 'background-color': 'orange' }"></span>
              </div>
            </td>
            <td class="group-name">{{ team.group?.name }}</td>
            <td class="team-name">{{ team.name }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
